<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Contact Us | UltraWebs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="css/contact.css" />
</head>

<body>

    <!-- Popup Notification -->
    <div id="popup"><span class="material-icons">info</span><span id="popup-message"></span></div>

    <div id="header-placeholder"></div>

    <div class="container">
        <h1>Contact Us</h1>

        <h2>Send us a Message</h2>

        <form id="contactForm">
            <div>
                <label for="name">Your Name</label>
                <input type="text" id="name" placeholder="Enter your name" required>
            </div>

            <div>
                <label for="email">Your Email</label>
                <input type="email" id="email" placeholder="Enter your email" required>
            </div>

            <div>
                <label for="message">Your Message</label>
                <textarea id="message" rows="5" placeholder="Write your message..." required></textarea>
            </div>

            <button type="submit">Send Message</button>
        </form>

        <div class="map-box">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15283753.631326701!2d72.0860651297915!3d20.735177176791836!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30635ff06b92b791%3A0xd78c4fa1854213a6!2sIndia!5e0!3m2!1sen!2sin!4v1758997478040!5m2!1sen!2sin"
                width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <div class="info">
            <div class="info-box">
                <h3><span class="material-icons">location_on</span> Address</h3>
                <p>India</p>
            </div>
            <div class="info-box">
                <h3><span class="material-icons">email</span> Email</h3>
                <p>ultrawebs.2024@gmail.com</p>
            </div>
            <div class="info-box">
                <h3><span class="material-icons">phone</span> Phone</h3>
                <p>+91 98882 4XXXX</p>
            </div>
        </div>
    </div>

    <div id="footer-container"></div>

    <script>
        fetch("favicon.html")
            .then((res) => res.text())
            .then((data) => document.head.insertAdjacentHTML("beforeend", data));

        // Load header
        fetch("header.html")
            .then((res) => res.text())
            .then((data) => {
                document.getElementById("header-placeholder").innerHTML = data;
                const menuToggle = document.querySelector(".menu-toggle");
                const nav = document.querySelector(".nav");
                if (menuToggle && nav) {
                    menuToggle.addEventListener("click", () => nav.classList.toggle("show"));
                    document.querySelectorAll(".nav a").forEach((link) => {
                        link.addEventListener("click", () => nav.classList.remove("show"));
                    });
                }
            });

        // Load footer
        fetch("footer.html")
            .then((res) => res.text())
            .then(
                (data) => (document.getElementById("footer-container").innerHTML = data)
            );

    </script>

    <!-- Firebase & Form Script -->
    <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // Your Firebase config (new project)
        const firebaseConfig = {
            apiKey: "AIzaSyAtgLji44mPNhTu_A6mlQg2OltsD3PmFxE",
            authDomain: "ultrawebs-livestream.firebaseapp.com",
            projectId: "ultrawebs-livestream",
            storageBucket: "ultrawebs-livestream.firebasestorage.app",
            messagingSenderId: "386637615711",
            appId: "1:386637615711:web:f20d4625fda4593dc081ea",
            measurementId: "G-BR2QYT87D4"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Popup function
        function showPopup(message, type = "success") {
            const popup = document.getElementById("popup");
            const popupMsg = document.getElementById("popup-message");
            const icon = popup.querySelector(".material-icons");

            popup.className = "";
            popup.classList.add("show", type);

            if (type === "success") {
                icon.textContent = "check_circle";
            } else {
                icon.textContent = "error";
            }

            popupMsg.textContent = message;
            popup.style.display = "flex";

            setTimeout(() => {
                popup.classList.remove("show");
                setTimeout(() => popup.style.display = "none", 300);
            }, 3500);
        }

        // Handle contact form submit
        const form = document.getElementById("contactForm");
        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const message = document.getElementById("message").value;

            try {
                await addDoc(collection(db, "messages"), {
                    name,
                    email,
                    message,
                    timestamp: new Date()
                });
                showPopup("Your message has been sent successfully.", "success");
                form.reset();
            } catch (error) {
                console.error("‚ùå Error adding document: ", error);
                showPopup("An error occurred. Please try again later.", "error");
            }
        });
    </script>

</body>

</html>