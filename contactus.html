<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Contact Us | UltraWebs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="css/contact.css" />
    <!-- Standard Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/j9VLdCVx/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://i.ibb.co/j9VLdCVx/favicon.png">
    <link rel="shortcut icon" href="https://i.ibb.co/j9VLdCVx/favicon.png" type="image/x-icon">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/j9VLdCVx/favicon.png">

    <!-- Android / Web App Manifest -->
    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#000000">

    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#2b5797">
    <meta name="msapplication-TileImage" content="https://i.ibb.co/j9VLdCVx/favicon.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="UltraWebs - Contact Us">
    <meta property="og:description"
        content="Get in touch with UltraWebs for inquiries, feedback, or support. Our team is ready to assist you with live TV streaming, website features, and more.">
    <meta property="og:image" content="https://i.ibb.co/sd5NzFTd/imgi-1-WWUD2o-e-Rd-OYx-Es-Btye4vg.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://ultra-webs.vercel.app/contact">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@UltraWebs">
    <meta name="twitter:title" content="UltraWebs - Contact Us">
    <meta name="twitter:description"
        content="Reach out to UltraWebs for any questions or support. Contact us to learn more about our free live TV streaming service and website features.">
    <meta name="twitter:image" content="https://i.ibb.co/sd5NzFTd/imgi-1-WWUD2o-e-Rd-OYx-Es-Btye4vg.png">

    <!-- Optional: Safari pinned tab -->
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#00e5ff">

</head>

<body>

    <!-- Popup Notification -->
    <div id="popup"><span class="material-icons">info</span><span id="popup-message"></span></div>

    <div id="header-placeholder"></div>

    <div class="container">
        <h1>Contact Us</h1>

        <h2>Send us a Message</h2>

        <form id="contactForm">
            <div>
                <label for="name">Your Name</label>
                <input type="text" id="name" placeholder="Enter your name" required>
            </div>

            <div>
                <label for="email">Your Email</label>
                <input type="email" id="email" placeholder="Enter your email" required>
            </div>

            <div>
                <label for="message">Your Message</label>
                <textarea id="message" rows="5" placeholder="Write your message..." required></textarea>
            </div>

            <button type="submit">Send Message</button>
        </form>

        <div class="map-box">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15283753.631326701!2d72.0860651297915!3d20.735177176791836!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30635ff06b92b791%3A0xd78c4fa1854213a6!2sIndia!5e0!3m2!1sen!2sin!4v1758997478040!5m2!1sen!2sin"
                width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <div class="info">
            <div class="info-box">
                <h3><span class="material-icons">location_on</span> Address</h3>
                <p>India</p>
            </div>
            <div class="info-box">
                <h3><span class="material-icons">email</span> Email</h3>
                <p>ultrawebs.2024@gmail.com</p>
            </div>
            <div class="info-box">
                <h3><span class="material-icons">phone</span> Phone</h3>
                <p>+91 98882 4XXXX</p>
            </div>
        </div>
    </div>

    <div id="footer-container"></div>

    <script>

        // Load header
        fetch("header.html")
            .then((res) => res.text())
            .then((data) => {
                document.getElementById("header-placeholder").innerHTML = data;
                const menuToggle = document.querySelector(".menu-toggle");
                const nav = document.querySelector(".nav");
                if (menuToggle && nav) {
                    menuToggle.addEventListener("click", () => nav.classList.toggle("show"));
                    document.querySelectorAll(".nav a").forEach((link) => {
                        link.addEventListener("click", () => nav.classList.remove("show"));
                    });
                }
            });

        // Load footer
        fetch("footer.html")
            .then((res) => res.text())
            .then(
                (data) => (document.getElementById("footer-container").innerHTML = data)
            );

    </script>

    <!-- Firebase & Form Script -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAtgLji44mPNhTu_A6mlQg2OltsD3PmFxE",
            authDomain: "ultrawebs-livestream.firebaseapp.com",
            projectId: "ultrawebs-livestream",
            storageBucket: "ultrawebs-livestream.firebasestorage.app",
            messagingSenderId: "386637615711",
            appId: "1:386637615711:web:f20d4625fda4593dc081ea",
            measurementId: "G-BR2QYT87D4"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Keep track of loading interval
        let loadingInterval = null;

        // Popup function
        function showPopup(message, type = "success") {
            const popup = document.getElementById("popup");
            const popupMsg = document.getElementById("popup-message");
            const icon = popup.querySelector(".material-icons");

            // Clear any previous animation
            if (loadingInterval) {
                clearInterval(loadingInterval);
                loadingInterval = null;
            }

            popup.className = "";
            popup.classList.add("show", type);

            if (type === "success") {
                icon.textContent = "check_circle";
            } else if (type === "error") {
                icon.textContent = "error";
            } else if (type === "loading") {
                icon.textContent = "hourglass_top";
                // Start animated dots
                let dots = 0;
                popupMsg.textContent = message;
                loadingInterval = setInterval(() => {
                    if (!popup.classList.contains("show")) {
                        clearInterval(loadingInterval);
                        loadingInterval = null;
                        return;
                    }
                    dots = (dots + 1) % 4;
                    popupMsg.textContent = message + ".".repeat(dots);
                }, 500);
            }

            popupMsg.textContent = message;
            popup.style.display = "flex";

            if (type !== "loading") {
                setTimeout(() => {
                    popup.classList.remove("show");
                    setTimeout(() => (popup.style.display = "none"), 300);
                }, 3500);
            }
        }

        // Handle contact form submit
        const form = document.getElementById("contactForm");
        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const name = document.getElementById("name").value.trim();
            const email = document.getElementById("email").value.trim();
            const message = document.getElementById("message").value.trim();

            // Professional sending message
            showPopup("We’re processing your request, please wait", "loading");

            try {
                // Custom doc ID: name + readable date
                const now = new Date();
                const safeName = name.replace(/\s+/g, "_").toLowerCase();
                const docId =
                    safeName +
                    "_" +
                    now.toISOString().replace(/[-:.TZ]/g, "").slice(0, 14);
                // e.g. john_doe_20250928T1432

                await setDoc(doc(db, "messages", docId), {
                    name,
                    email,
                    message,
                    timestamp: now
                });

                showPopup("Your message has been sent successfully.", "success");
                form.reset();
            } catch (error) {
                console.error("❌ Error saving document: ", error);
                showPopup("An error occurred. Please try again later.", "error");
            }
        });
    </script>

</body>

</html>